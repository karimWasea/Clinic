@model PagedList.IPagedList<Clinicss.Models.DoctorVm>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "_Layout";
    ViewData["Title"] = "All Doctors";
}

<!-- Panel for Searching -->
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Search Doctors</h3>
    </div>
    <div class="panel-body">
        <form asp-action="Index" method="get" class="form-inline">
          
            <div class="form-group">
                <input type="text" name="FilterBy" value="@ViewBag.Search" class="form-control" id="search-input"  placeholder="Specialty">
            </div>
             <button type="submit" class="btn btn-primary">Search</button>
        </form>
    </div>
</div>
<a asp-action="ٍSave" class="btn btn-success">Add New Doctor</a>
 
<div id="search-results">

<table class="table table-hover" style="background-color: lightgreen;">
    <thead>
        <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Address</th>
            <th>National ID</th>
            <th>Birthdate</th>
            <th>Start Shift</th>
            <th>End Shift</th>
            <th>Gender</th>
            <th>Salary</th>
            <th>Title</th>
            <th>Phone Number</th>
            <th>Email</th>
            <th>Hiring Date</th>
            <th>Specialty</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var doctor in Model)
        {
            <tr>
                <td>@doctor.Name</td>
                <td>@doctor.Age</td>
                <td>@doctor.Address</td>
                <td>@doctor.NationalID</td>
                <td>@doctor.Birthdate.ToShortDateString()</td>
                <td>@doctor.StartShif.ToShortTimeString()</td>
                <td>@doctor.Endshift.ToShortTimeString()</td>
                <td>@doctor.Gender</td>
                <td>@doctor.Salary</td>
                <td>@doctor.Title</td>
                <td>@doctor.phonenumber</td>
                <td>@doctor.Email</td>
                <td>@doctor.HiringDate.ToShortDateString()</td>
                <td>@doctor.Specialty</td>
                <td>
                    <a asp-action="Save" asp-route-id="@doctor.Id" class="btn btn-primary">Edit</a>
                    <a asp-action="Delete" asp-route-id="@doctor.Id" class="btn btn-danger">Delete</a>
                </td>
            </tr>
        }
    </tbody>
</table>
</div>


<partial name="_PaginationPartial" model="Model" />

@section Scripts {
    @*     <script src="~/js/employeeindex.js"></script>
 *@    <script>
               // Get the search input element
               const searchInput = document.getElementById('search-input');

               // Get the patient rows
               const patientRows = document.querySelectorAll('.patient');

               // Function to update the search results
               function updateSearchResults() {
                   const searchText = searchInput.value.toLowerCase();

                   patientRows.forEach(patientRow => {
                       const patientText = patientRow.textContent.toLowerCase();
                       if (patientText.includes(searchText)) {
                           patientRow.style.display = 'table-row';
                       } else {
                           patientRow.style.display = 'none';
                       }
                   });
               }

               // Add an event listener to the search input to listen for input changes
               searchInput.addEventListener('input', function () {
                   updateSearchResults();
               });

               // Initial call to populate search results
               updateSearchResults();
    </script>

}

<!-- Button for Adding a New Doctor -->
